# üìã Classification des Colonnes - Mod√®le Terranex Biom√©thane
## Liste D√©taill√©e par Table et Type S√©mantique

---

## üè≠ **TABLE 1 : SITE_DIM**

### **üè∑Ô∏è DIMENSIONS (11 colonnes)**
- `id_site` - Identifiant unique du site
- `nom_site` - Nom du site de m√©thanisation
- `id_producteur` - Identifiant du producteur
- `nom_producteur` - Nom de l'entreprise exploitante
- `technologie_production` - Type de proc√©d√© (m√©thanisation, pyrogaz√©ification)
- `type_intrants` - Mati√®res premi√®res utilis√©es
- `region` - R√©gion administrative fran√ßaise
- `departement` - D√©partement fran√ßais
- `code_postal` - Code postal du site
- `statut_operationnel` - ACTIF/MAINTENANCE/ARRETE
- `coordonnees_gps` - G√©olocalisation (latitude,longitude)

### **‚è∞ TIME DIMENSIONS (1 colonne)**
- `date_mise_en_service` - Date de d√©marrage du site

### **üìä FACTS (1 colonne)**
- `capacite_nominale_mwh_jour` - Capacit√© th√©orique en MWh/jour

### **üîç NAMED FILTERS (3 filtres)**
- `sites_actifs` : `statut_operationnel = 'ACTIF'`
- `sites_haute_capacite` : `capacite_nominale_mwh_jour > 25`
- `sites_recent` : `date_mise_en_service >= '2020-01-01'`

### **üìà METRICS (4 m√©triques)**
- `nombre_sites` : `COUNT(DISTINCT id_site)`
- `capacite_totale` : `SUM(capacite_nominale_mwh_jour)`
- `capacite_moyenne` : `AVG(capacite_nominale_mwh_jour)`
- `nombre_producteurs` : `COUNT(DISTINCT id_producteur)`

---

## ‚è∞ **TABLE 2 : TEMPS_DIM**

### **‚è∞ TIME DIMENSIONS (8 colonnes)**
- `id_temps` - Cl√© primaire temporelle (YYYYMMDD)
- `date_complete` - Date compl√®te (dimension temporelle principale)
- `annee` - Ann√©e (hi√©rarchie niveau 1)
- `trimestre` - Trimestre T1-T4 (hi√©rarchie niveau 2)
- `mois_nom` - Nom du mois fran√ßais (hi√©rarchie niveau 3)
- `semaine_numero` - Num√©ro de semaine dans l'ann√©e
- `jour_de_la_semaine` - Jour en fran√ßais (Lundi-Dimanche)
- `est_ferie` - Indicateur bool√©en jour f√©ri√© fran√ßais

### **üè∑Ô∏è DIMENSIONS (1 colonne)**
- `nom_ferie` - Nom du jour f√©ri√© fran√ßais

### **üîç NAMED FILTERS (5 filtres)**
- `jours_ouvres` : `est_ferie = FALSE AND jour_de_la_semaine NOT IN ('Samedi', 'Dimanche')`
- `weekend` : `jour_de_la_semaine IN ('Samedi', 'Dimanche')`
- `jours_feries` : `est_ferie = TRUE`
- `periode_hiver` : `trimestre = 'T1'`
- `periode_ete` : `trimestre = 'T3'`

### **üìà METRICS (4 m√©triques)**
- `nombre_jours` : `COUNT(DISTINCT id_temps)`
- `nombre_jours_feries` : `COUNT(CASE WHEN est_ferie = TRUE THEN 1 END)`
- `nombre_semaines` : `COUNT(DISTINCT semaine_numero)`
- `nombre_mois` : `COUNT(DISTINCT mois_nom)`

---

## üåê **TABLE 3 : RESEAU_DIM**

### **üè∑Ô∏è DIMENSIONS (9 colonnes)**
- `id_poste_reseau` - Identifiant unique du poste
- `nom_poste_injection` - Nom/code du poste Terranex
- `responsable_exploitation_reseau` - √âquipe en charge
- `zone_geographique_reseau` - D√©coupage interne Terranex
- `type_poste` - Classification technique (HP, MP, THT, Test)
- `statut_operationnel` - ACTIF/MAINTENANCE/ARRETE
- `coordonnees_gps` - G√©olocalisation du poste

### **‚è∞ TIME DIMENSIONS (1 colonne)**
- `date_mise_en_service` - Date de mise en service du poste

### **üìä FACTS (2 colonnes)**
- `niveau_pression_bar` - Pression en bars (40=MP, 67=HP)
- `capacite_injection_max_nm3_h` - Capacit√© maximale en Nm¬≥/h

### **üîç NAMED FILTERS (4 filtres)**
- `postes_haute_pression` : `niveau_pression_bar >= 67`
- `postes_moyenne_pression` : `niveau_pression_bar = 40`
- `postes_haute_capacite` : `capacite_injection_max_nm3_h > 15000`
- `postes_pilotes` : `zone_geographique_reseau = 'Zone Pilote'`

### **üìà METRICS (5 m√©triques)**
- `nombre_postes` : `COUNT(DISTINCT id_poste_reseau)`
- `capacite_totale_reseau` : `SUM(capacite_injection_max_nm3_h)`
- `capacite_moyenne_postes` : `AVG(capacite_injection_max_nm3_h)`
- `nombre_zones` : `COUNT(DISTINCT zone_geographique_reseau)`
- `nombre_equipes` : `COUNT(DISTINCT responsable_exploitation_reseau)`

---

## üß™ **TABLE 4 : QUALITE_DIM**

### **üè∑Ô∏è DIMENSIONS (6 colonnes)**
- `id_analyse_qualite` - Identifiant unique de l'analyse
- `statut_conformite` - Conforme/Non-conforme/D√©rogation
- `laboratoire_analyse` - Laboratoire Terranex responsable
- `methode_analyse` - Technique chromatographique (GC-MS, GC-FID, GC-TCD)
- `operateur_analyse` - Technicien responsable
- `commentaires` - Observations d√©taill√©es

### **‚è∞ TIME DIMENSIONS (1 colonne)**
- `timestamp_analyse` - Date/heure pr√©cise de l'analyse

### **üìä FACTS (6 colonnes)**
- `pcs_kwh_m3` - Pouvoir Calorifique Sup√©rieur en kWh/m¬≥
- `wobbe_index` - Indice d'interchangeabilit√© des gaz
- `teneur_h2s_ppm` - Sulfure d'hydrog√®ne en ppm (toxique)
- `teneur_co2_pourcentage` - Dioxyde de carbone en %
- `temperature_analyse_celsius` - Temp√©rature lors de l'analyse
- `pression_analyse_bar` - Pression lors de l'analyse

### **üîç NAMED FILTERS (4 filtres)**
- `analyses_conformes` : `statut_conformite = 'Conforme'`
- `analyses_problematiques` : `statut_conformite != 'Conforme'`
- `h2s_eleve` : `teneur_h2s_ppm > 5.0`
- `pcs_optimal` : `pcs_kwh_m3 >= 10.8`

### **üìà METRICS (8 m√©triques)**
- `nombre_analyses` : `COUNT(DISTINCT id_analyse_qualite)`
- `taux_conformite` : `(COUNT(CASE WHEN statut_conformite = 'Conforme' THEN 1 END) * 100.0 / COUNT(*))`
- `pcs_moyen` : `AVG(pcs_kwh_m3)`
- `wobbe_moyen` : `AVG(wobbe_index)`
- `h2s_moyen` : `AVG(teneur_h2s_ppm)`
- `co2_moyen` : `AVG(teneur_co2_pourcentage)`
- `nombre_non_conformes` : `COUNT(CASE WHEN statut_conformite = 'Non-conforme' THEN 1 END)`
- `nombre_derogations` : `COUNT(CASE WHEN statut_conformite = 'Conforme avec d√©rogation' THEN 1 END)`

---

## üìä **TABLE 5 : INJECTION_FACT (Table de Faits Centrale)**

### **üè∑Ô∏è DIMENSIONS (6 colonnes)**
- `id_injection` - Identifiant unique de l'injection
- `id_site` - R√©f√©rence vers SITE_DIM
- `id_temps` - R√©f√©rence vers TEMPS_DIM
- `id_poste_reseau` - R√©f√©rence vers RESEAU_DIM
- `id_analyse_qualite` - R√©f√©rence vers QUALITE_DIM (optionnel)
- `statut_injection` - NORMAL/REDUIT/ARRETE

### **üìä FACTS (6 colonnes)**
- `volume_injecte_m3` - Volume en m√®tres cubes ‚≠ê **FACT PRINCIPAL**
- `energie_injectee_mwh` - √ânergie en MWh ‚≠ê **KPI PRINCIPAL TERRANEX**
- `debit_moyen_m3_h` - D√©bit horaire moyen
- `pression_injection_bar` - Pression d'injection
- `temperature_gaz_celsius` - Temp√©rature du gaz
- `duree_injection_minutes` - Dur√©e de l'injection

### **üîç NAMED FILTERS (6 filtres)**
- `injections_normales` : `statut_injection = 'NORMAL'`
- `injections_reduites` : `statut_injection = 'REDUIT'`
- `injections_arretees` : `statut_injection = 'ARRETE'`
- `haute_production` : `energie_injectee_mwh > 20`
- `avec_analyse_qualite` : `id_analyse_qualite IS NOT NULL`
- `periode_recente` : `id_temps >= 20240101`

### **üìà METRICS (15 m√©triques)**

#### **√ânerg√©tiques (KPI Principal)**
- `energie_totale` : `SUM(energie_injectee_mwh)`
- `energie_moyenne` : `AVG(energie_injectee_mwh)`
- `energie_maximale` : `MAX(energie_injectee_mwh)`
- `energie_minimale` : `MIN(energie_injectee_mwh)`

#### **Volum√©triques**
- `volume_total` : `SUM(volume_injecte_m3)`
- `volume_moyen` : `AVG(volume_injecte_m3)`
- `debit_total` : `SUM(debit_moyen_m3_h)`
- `debit_moyen` : `AVG(debit_moyen_m3_h)`

#### **Op√©rationnelles**
- `nombre_injections` : `COUNT(*)`
- `taux_disponibilite` : `(COUNT(CASE WHEN statut_injection = 'NORMAL' THEN 1 END) * 100.0 / COUNT(*))`
- `nombre_arrets` : `COUNT(CASE WHEN statut_injection = 'ARRETE' THEN 1 END)`
- `nombre_reductions` : `COUNT(CASE WHEN statut_injection = 'REDUIT' THEN 1 END)`

#### **Techniques**
- `temperature_moyenne` : `AVG(temperature_gaz_celsius)`
- `pression_moyenne` : `AVG(pression_injection_bar)`
- `duree_moyenne` : `AVG(duree_injection_minutes)`

---

## üìä **SYNTH√àSE GLOBALE**

### **üìà R√âPARTITION PAR TYPE**
| **Type** | **Total** | **Distribution** |
|----------|-----------|------------------|
| **DIMENSIONS** | 32 | Sites(11) + R√©seau(9) + Qualit√©(6) + Injection(6) |
| **TIME DIMENSIONS** | 10 | Temps(8) + Sites(1) + R√©seau(1) |
| **FACTS** | 15 | Injection(6) + Qualit√©(6) + R√©seau(2) + Sites(1) |
| **NAMED FILTERS** | 22 | 3-6 par table selon complexit√© |
| **METRICS** | 36 | Injection(15) + Qualit√©(8) + R√©seau(5) + Sites(4) + Temps(4) |

### **‚≠ê COLONNES CL√âS PAR PRIORIT√â**

#### **üéØ KPIs Principaux (FACTS)**
1. `energie_injectee_mwh` - **KPI #1 Terranex**
2. `volume_injecte_m3` - M√©trique op√©rationnelle
3. `capacite_nominale_mwh_jour` - Potentiel th√©orique
4. `pcs_kwh_m3` - Qualit√© √©nerg√©tique

#### **üè∑Ô∏è Dimensions Business Critiques**
1. `region` - Analyses g√©ographiques
2. `technologie_production` - Comparaisons techniques
3. `statut_conformite` - Conformit√© r√©glementaire
4. `zone_geographique_reseau` - Infrastructure
5. `statut_injection` - √âtat op√©rationnel

#### **‚è∞ Hi√©rarchies Temporelles**
1. `date_complete` ‚Üí `annee` ‚Üí `trimestre` ‚Üí `mois_nom`
2. `semaine_numero` ‚Üí `jour_de_la_semaine`
3. `est_ferie` ‚Üí `nom_ferie`
4. `timestamp_analyse` (pr√©cision horaire)

---

## üéØ **USAGE RECOMMAND√â DANS VUE S√âMANTIQUE**

### **Tables Configuration**
```sql
tables (
    INJECTIONS as INJECTION_FACT primary key (ID_INJECTION),
    SITES as SITE_DIM primary key (ID_SITE),
    CALENDRIER as TEMPS_DIM primary key (ID_TEMPS),
    RESEAU as RESEAU_DIM primary key (ID_POSTE_RESEAU),
    QUALITE as QUALITE_DIM primary key (ID_ANALYSE_QUALITE)
)
```

### **Facts Configuration**
```sql
facts (
    -- KPI Principal Terranex
    INJECTIONS.ENERGIE_INJECTEE_MWH as energie,
    INJECTIONS.VOLUME_INJECTE_M3 as volume,
    INJECTIONS.DEBIT_MOYEN_M3_H as debit,
    
    -- Capacit√©s
    SITES.CAPACITE_NOMINALE_MWH_JOUR as capacite_site,
    RESEAU.CAPACITE_INJECTION_MAX_NM3_H as capacite_reseau,
    
    -- Qualit√©
    QUALITE.PCS_KWH_M3 as pcs,
    QUALITE.WOBBE_INDEX as wobbe,
    QUALITE.TENEUR_H2S_PPM as h2s,
    QUALITE.TENEUR_CO2_POURCENTAGE as co2
)
```

### **Dimensions Configuration**
```sql
dimensions (
    -- G√©ographiques
    SITES.REGION as region,
    SITES.DEPARTEMENT as departement,
    RESEAU.ZONE_GEOGRAPHIQUE_RESEAU as zone_reseau,
    
    -- Techniques
    SITES.TECHNOLOGIE_PRODUCTION as technologie,
    SITES.TYPE_INTRANTS as intrants,
    RESEAU.TYPE_POSTE as type_poste,
    RESEAU.NIVEAU_PRESSION_BAR as pression_reseau,
    
    -- Op√©rationnelles
    SITES.STATUT_OPERATIONNEL as statut_site,
    RESEAU.STATUT_OPERATIONNEL as statut_poste,
    INJECTIONS.STATUT_INJECTION as statut_injection,
    QUALITE.STATUT_CONFORMITE as conformite,
    
    -- Organisationnelles
    SITES.NOM_PRODUCTEUR as producteur,
    RESEAU.RESPONSABLE_EXPLOITATION_RESEAU as equipe_reseau,
    QUALITE.LABORATOIRE_ANALYSE as laboratoire
)
```

### **Time Dimensions Configuration**
```sql
time_dimensions (
    -- Hi√©rarchie principale
    CALENDRIER.DATE_COMPLETE as date,
    CALENDRIER.ANNEE as annee,
    CALENDRIER.TRIMESTRE as trimestre,
    CALENDRIER.MOIS_NOM as mois,
    
    -- Cycles hebdomadaires
    CALENDRIER.SEMAINE_NUMERO as semaine,
    CALENDRIER.JOUR_DE_LA_SEMAINE as jour_semaine,
    
    -- √âv√©nements sp√©ciaux
    CALENDRIER.EST_FERIE as est_ferie,
    CALENDRIER.NOM_FERIE as nom_ferie,
    
    -- Analyses qualit√©
    QUALITE.TIMESTAMP_ANALYSE as timestamp_qualite
)
```

---

## üìã **LISTE COMPL√àTE ALPHAB√âTIQUE**

### **A-C**
- `annee` - ‚è∞ TIME DIMENSION
- `capacite_injection_max_nm3_h` - üìä FACT
- `capacite_nominale_mwh_jour` - üìä FACT
- `code_postal` - üè∑Ô∏è DIMENSION
- `commentaires` - üè∑Ô∏è DIMENSION
- `coordonnees_gps` (SITE_DIM) - üè∑Ô∏è DIMENSION
- `coordonnees_gps` (RESEAU_DIM) - üè∑Ô∏è DIMENSION

### **D-I**
- `date_complete` - ‚è∞ TIME DIMENSION
- `date_mise_en_service` (SITE_DIM) - ‚è∞ TIME DIMENSION
- `date_mise_en_service` (RESEAU_DIM) - ‚è∞ TIME DIMENSION
- `debit_moyen_m3_h` - üìä FACT
- `departement` - üè∑Ô∏è DIMENSION
- `duree_injection_minutes` - üìä FACT
- `energie_injectee_mwh` - üìä FACT ‚≠ê **KPI PRINCIPAL**
- `est_ferie` - ‚è∞ TIME DIMENSION
- `id_analyse_qualite` (QUALITE_DIM) - üè∑Ô∏è DIMENSION
- `id_analyse_qualite` (INJECTION_FACT) - üè∑Ô∏è DIMENSION
- `id_injection` - üè∑Ô∏è DIMENSION
- `id_poste_reseau` (RESEAU_DIM) - üè∑Ô∏è DIMENSION
- `id_poste_reseau` (INJECTION_FACT) - üè∑Ô∏è DIMENSION
- `id_producteur` - üè∑Ô∏è DIMENSION
- `id_site` (SITE_DIM) - üè∑Ô∏è DIMENSION
- `id_site` (INJECTION_FACT) - üè∑Ô∏è DIMENSION
- `id_temps` (TEMPS_DIM) - ‚è∞ TIME DIMENSION
- `id_temps` (INJECTION_FACT) - üè∑Ô∏è DIMENSION

### **J-N**
- `jour_de_la_semaine` - ‚è∞ TIME DIMENSION
- `laboratoire_analyse` - üè∑Ô∏è DIMENSION
- `methode_analyse` - üè∑Ô∏è DIMENSION
- `mois_nom` - ‚è∞ TIME DIMENSION
- `niveau_pression_bar` - üìä FACT
- `nom_ferie` - üè∑Ô∏è DIMENSION
- `nom_poste_injection` - üè∑Ô∏è DIMENSION
- `nom_producteur` - üè∑Ô∏è DIMENSION
- `nom_site` - üè∑Ô∏è DIMENSION

### **O-S**
- `operateur_analyse` - üè∑Ô∏è DIMENSION
- `pcs_kwh_m3` - üìä FACT
- `pression_analyse_bar` - üìä FACT
- `pression_injection_bar` - üìä FACT
- `region` - üè∑Ô∏è DIMENSION
- `responsable_exploitation_reseau` - üè∑Ô∏è DIMENSION
- `semaine_numero` - ‚è∞ TIME DIMENSION
- `statut_conformite` - üè∑Ô∏è DIMENSION
- `statut_injection` - üè∑Ô∏è DIMENSION
- `statut_operationnel` (SITE_DIM) - üè∑Ô∏è DIMENSION
- `statut_operationnel` (RESEAU_DIM) - üè∑Ô∏è DIMENSION

### **T-Z**
- `technologie_production` - üè∑Ô∏è DIMENSION
- `temperature_analyse_celsius` - üìä FACT
- `temperature_gaz_celsius` - üìä FACT
- `teneur_co2_pourcentage` - üìä FACT
- `teneur_h2s_ppm` - üìä FACT
- `timestamp_analyse` - ‚è∞ TIME DIMENSION
- `trimestre` - ‚è∞ TIME DIMENSION
- `type_intrants` - üè∑Ô∏è DIMENSION
- `type_poste` - üè∑Ô∏è DIMENSION
- `volume_injecte_m3` - üìä FACT
- `wobbe_index` - üìä FACT
- `zone_geographique_reseau` - üè∑Ô∏è DIMENSION

---

## üéØ **RECOMMANDATIONS D'IMPL√âMENTATION**

### **üè∑Ô∏è DIMENSIONS - Usage Principal**
- **Filtrage** : `WHERE region = 'Hauts-de-France'`
- **Groupement** : `GROUP BY technologie_production`
- **Drill-down** : `region ‚Üí departement ‚Üí nom_site`

### **‚è∞ TIME DIMENSIONS - Hi√©rarchies**
- **Principale** : `date ‚Üí annee ‚Üí trimestre ‚Üí mois`
- **Hebdomadaire** : `semaine ‚Üí jour_semaine`
- **√âv√©nementielle** : `est_ferie ‚Üí nom_ferie`

### **üìä FACTS - Agr√©gations**
- **Additives** : `SUM(energie_injectee_mwh)`, `SUM(volume_injecte_m3)`
- **Moyennes** : `AVG(debit_moyen_m3_h)`, `AVG(pcs_kwh_m3)`
- **Extremums** : `MAX(energie_injectee_mwh)`, `MIN(teneur_h2s_ppm)`

### **üîç NAMED FILTERS - Simplification**
- **Business** : Filtres m√©tier courants
- **Performance** : Requ√™tes pr√©-optimis√©es
- **Gouvernance** : Logique centralis√©e

### **üìà METRICS - KPIs Pr√™ts**
- **Op√©rationnels** : Taux disponibilit√©, utilisation
- **Qualit√©** : Taux conformit√©, moyennes techniques
- **Capacit√©** : Totaux, moyennes, comparaisons

Cette classification permet une **vue s√©mantique optimale** pour Cortex Analyst et des analyses conversationnelles tr√®s riches ! üöÄ
